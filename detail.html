<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Notebook Detail - notebooklm.directory</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#00ff88',
            dark: {
              900: '#0a0a0a',
              800: '#1a1a2e',
              700: '#16213e',
            },
          },
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
          },
        },
      },
    }
  </script>
  <link rel="stylesheet" href="styles.css">
  <meta name="description" content="Discover innovative NotebookLM projects, share your own work, and connect with a community of researchers and creators.">
  <meta property="og:title" content="Notebook Detail - notebooklm.directory">
  <meta property="og:description" content="The premier platform for NotebookLM exploration.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://notebooklm.directory/detail.html">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body class="bg-dark-900 text-white font-sans">
  <!-- Header -->
  <header class="sticky top-0 z-50 bg-dark-900/70 backdrop-blur-xl border-b border-primary/10 shadow-lg">
    <nav class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
      <a href="index.html" class="text-2xl font-bold flex items-center gap-3">
        <span class="bg-gradient-to-r from-primary to-primary/80 text-dark-900 px-3 py-2 rounded-lg text-sm font-bold tracking-wider font-mono">NLM_D</span>
        notebooklm<span class="text-primary">.directory</span>
      </a>
      
      <div class="hidden md:flex items-center gap-6">
        <a href="index.html" class="text-gray-200 hover:text-primary transition-colors">Home</a>
        <a href="index.html#notebooks" class="text-gray-200 hover:text-primary transition-colors">Browse</a>
        <a href="#" class="text-gray-200 hover:text-primary transition-colors">About</a>
        <button id="submitBtn" class="bg-gradient-to-r from-primary to-primary/80 text-dark-900 font-bold py-2 px-4 rounded-lg hover:shadow-lg hover:shadow-primary/30 transition-all transform hover:-translate-y-1">Submit Notebook</button>
      </div>
      
      <button id="mobileMenuBtn" class="md:hidden text-white text-xl">☰</button>
    </nav>
    
    <!-- Mobile Menu -->
    <div id="mobileMenu" class="hidden md:hidden bg-dark-800/95 backdrop-blur-xl w-full border-b border-primary/10 shadow-lg">
      <div class="flex flex-col p-4 gap-4">
        <a href="index.html" class="text-gray-200 hover:text-primary transition-colors py-2">Home</a>
        <a href="index.html#notebooks" class="text-gray-200 hover:text-primary transition-colors py-2">Browse</a>
        <a href="#" class="text-gray-200 hover:text-primary transition-colors py-2">About</a>
        <button id="mobileSubmitBtn" class="bg-gradient-to-r from-primary to-primary/80 text-dark-900 font-bold py-2 px-4 rounded-lg">Submit Notebook</button>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main>
    <!-- Loading State -->
    <div id="loading" class="py-20 text-center">
      <div class="spinner"></div>
      <p class="mt-4 text-gray-300">Loading notebook details...</p>
    </div>
    
    <!-- Error State -->
    <div id="error" class="hidden py-20 text-center max-w-4xl mx-auto px-4">
      <div class="text-4xl mb-4">⚠️</div>
      <h3 class="text-2xl font-semibold mb-2">Something went wrong</h3>
      <p class="text-gray-300 mb-6" id="errorMessage">Failed to load notebook details.</p>
      <a href="index.html" class="bg-gradient-to-r from-primary to-primary/80 text-dark-900 font-bold py-2 px-6 rounded-lg inline-block">Back to Home</a>
    </div>
    
    <!-- Notebook Detail -->
    <section id="notebookDetail" class="hidden py-16 max-w-4xl mx-auto px-4">
      <div class="card p-8">
        <div class="flex flex-wrap gap-2 mb-4">
          <span class="category-badge" id="detailCategory">Category</span>
          <span class="featured-badge hidden" id="detailFeatured">Featured</span>
        </div>
        
        <h1 class="text-3xl md:text-4xl font-bold text-white mb-6" id="detailTitle">Notebook Title</h1>
        
        <p class="text-gray-200 mb-8 leading-relaxed" id="detailDescription">Description loading...</p>
        
        <div class="flex flex-wrap gap-2 mb-8" id="detailTags">
          <!-- Tags will be inserted here -->
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
          <div class="bg-white/5 rounded-xl p-6 border border-white/10">
            <h3 class="text-lg font-semibold mb-4 text-primary">Author Information</h3>
            <div class="mb-2">
              <span class="text-gray-400 text-sm">Author:</span>
              <span class="text-white font-medium" id="detailAuthor">Author Name</span>
            </div>
            <div class="mb-2">
              <span class="text-gray-400 text-sm">Institution:</span>
              <span class="text-white" id="detailInstitution">Institution Name</span>
            </div>
            <div class="mb-2">
              <span class="text-gray-400 text-sm">Date Added:</span>
              <span class="text-white" id="detailDate">Date</span>
            </div>
          </div>
          
          <div class="bg-white/5 rounded-xl p-6 border border-white/10">
            <h3 class="text-lg font-semibold mb-4 text-primary">Engagement</h3>
            <div class="flex justify-between">
              <div>
                <div class="text-3xl font-bold text-white mb-1" id="detailViews">0</div>
                <div class="text-gray-400 text-sm">Views</div>
              </div>
              <div>
                <div class="text-3xl font-bold text-white mb-1" id="detailSaves">0</div>
                <div class="text-gray-400 text-sm">Saves</div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="flex flex-col md:flex-row gap-4">
          <a id="detailLink" href="#" target="_blank" class="bg-gradient-to-r from-primary to-primary/80 text-dark-900 px-6 py-3 rounded-xl font-bold text-center flex-1 hover:shadow-lg hover:shadow-primary/30 transition-all transform hover:-translate-y-1">
            Open Notebook
          </a>
          <a href="index.html" class="bg-transparent text-gray-300 border border-white/20 px-6 py-3 rounded-xl font-medium text-center hover:border-primary hover:text-primary transition-colors">
            Back to Home
          </a>
        </div>
      </div>
      
      <!-- Related Notebooks -->
      <div class="mt-12">
        <h2 class="text-2xl font-bold mb-6">Related Notebooks</h2>
        <div id="relatedNotebooks" class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <!-- Related notebooks will be inserted here -->
        </div>
      </div>
    </section>
  </main>

  <!-- Submit Notebook Modal -->
  <div id="submitModal" class="modal">
    <div class="modal-content">
      <div class="flex justify-between items-center mb-8">
        <h2 class="text-2xl font-bold text-white">
          Connect a New <span class="text-primary">Notebook</span>
        </h2>
        <button id="closeModal" class="text-2xl text-gray-300 hover:text-primary hover:bg-white/10 p-2 rounded-lg transition-colors">×</button>
      </div>
      
      <div id="submitError" class="hidden bg-red-900/20 border border-red-500/30 text-red-400 p-4 rounded-xl mb-6"></div>
      <div id="submitSuccess" class="hidden bg-primary/10 border border-primary/30 text-primary p-4 rounded-xl mb-6">
        Notebook submitted successfully!
      </div>
      
      <form id="submitForm">
        <div class="mb-6">
          <label class="block mb-2 font-semibold text-white uppercase text-sm tracking-wider">Project Title *</label>
          <input 
            type="text" 
            name="title" 
            required 
            class="w-full p-4 border border-white/20 rounded-xl bg-white/5 text-white focus:border-primary transition-colors"
            placeholder="Enter a descriptive title"
          >
        </div>
        
        <div class="mb-6">
          <label class="block mb-2 font-semibold text-white uppercase text-sm tracking-wider">Description *</label>
          <textarea 
            name="description" 
            required 
            rows="3" 
            class="w-full p-4 border border-white/20 rounded-xl bg-white/5 text-white focus:border-primary transition-colors resize-vertical"
            placeholder="Describe your project and insights"
          ></textarea>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <div>
            <label class="block mb-2 font-semibold text-white uppercase text-sm tracking-wider">Category *</label>
            <select 
              name="category" 
              required 
              class="w-full p-4 border border-white/20 rounded-xl bg-white/5 text-white focus:border-primary transition-colors"
            >
              <option value="" class="bg-dark-800">Select category</option>
              <option value="Academic" class="bg-dark-800">Academic</option>
              <option value="Business" class="bg-dark-800">Business</option>
              <option value="Creative" class="bg-dark-800">Creative</option>
              <option value="Research" class="bg-dark-800">Research</option>
              <option value="Education" class="bg-dark-800">Education</option>
              <option value="Personal" class="bg-dark-800">Personal</option>
            </select>
          </div>
          
          <div>
            <label class="block mb-2 font-semibold text-white uppercase text-sm tracking-wider">Tags</label>
            <input 
              type="text" 
              name="tags" 
              class="w-full p-4 border border-white/20 rounded-xl bg-white/5 text-white focus:border-primary transition-colors"
              placeholder="AI, Research, etc. (comma separated)"
            >
          </div>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <div>
            <label class="block mb-2 font-semibold text-white uppercase text-sm tracking-wider">Author Name *</label>
            <input 
              type="text" 
              name="author" 
              required 
              class="w-full p-4 border border-white/20 rounded-xl bg-white/5 text-white focus:border-primary transition-colors"
              placeholder="Your name"
            >
          </div>
          
          <div>
            <label class="block mb-2 font-semibold text-white uppercase text-sm tracking-wider">Institution</label>
            <input 
              type="text" 
              name="institution" 
              class="w-full p-4 border border-white/20 rounded-xl bg-white/5 text-white focus:border-primary transition-colors"
              placeholder="University, Company, etc."
            >
          </div>
        </div>
        
        <div class="mb-6">
          <label class="block mb-2 font-semibold text-white uppercase text-sm tracking-wider">NotebookLM Share URL *</label>
          <input 
            type="url" 
            name="notebook_url" 
            required 
            class="w-full p-4 border border-white/20 rounded-xl bg-white/5 text-white focus:border-primary transition-colors"
            placeholder="https://notebooklm.google.com/notebook/..."
          >
        </div>
        
        <div class="flex justify-end gap-4 mt-6">
          <button 
            type="button" 
            id="cancelSubmit" 
            class="bg-transparent text-gray-300 border border-white/20 px-8 py-4 rounded-xl font-medium hover:border-primary hover:text-primary transition-colors"
          >
            Cancel
          </button>
          <button 
            type="submit" 
            id="submitFormBtn"
            class="bg-gradient-to-r from-primary to-primary/80 text-dark-900 px-8 py-4 rounded-xl font-bold uppercase tracking-wider hover:shadow-lg hover:shadow-primary/30 transition-all transform hover:-translate-y-1"
          >
            Create Notebook
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Footer -->
  <footer class="gradient-bg py-12 mt-16 border-t border-primary/10">
    <div class="max-w-7xl mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-12">
        <div>
          <h3 class="text-primary mb-4 text-lg font-medium">notebooklm.directory</h3>
          <p class="text-gray-300 text-sm leading-relaxed">
            Building the future of AI research through community collaboration and environmental responsibility.
          </p>
        </div>
        
        <div>
          <h4 class="text-white mb-4 font-medium">Quick Links</h4>
          <div class="flex flex-col gap-3">
            <a href="index.html#notebooks" class="text-gray-300 text-sm hover:text-primary transition-colors">Browse Projects</a>
            <a href="#" id="footerSubmitBtn" class="text-gray-300 text-sm hover:text-primary transition-colors">Submit Project</a>
            <a href="#" class="text-gray-300 text-sm hover:text-primary transition-colors">About</a>
          </div>
        </div>
        
        <div>
          <h4 class="text-white mb-4 font-medium">Community</h4>
          <div class="flex flex-col gap-3">
            <a href="#" class="text-gray-300 text-sm hover:text-primary transition-colors">Support Us</a>
            <a href="#" class="text-gray-300 text-sm hover:text-primary transition-colors">Analytics</a>
            <a href="mailto:support@notebooklm.directory" class="text-gray-300 text-sm hover:text-primary transition-colors">Contact</a>
          </div>
        </div>
        
        <div>
          <h4 class="text-white mb-4 font-medium">Environmental Impact</h4>
          <div class="bg-primary/10 border border-primary/20 shadow-lg shadow-primary/10 rounded-xl p-4 text-sm backdrop-blur-md">
            <div class="text-primary font-semibold mb-2">Our Impact Today:</div>
            <div class="text-gray-300 text-xs leading-relaxed">
              • 47% reduction in redundant research<br>
              • $3.2M in computational costs saved<br>
              • 156T CO₂ emissions prevented
            </div>
          </div>
        </div>
      </div>
      
      <div class="border-t border-primary/10 pt-8 flex justify-between items-center flex-wrap gap-4">
        <p class="text-gray-300 text-sm">
          © 2025 notebooklm.directory. Empowering sustainable AI research.
        </p>
        
        <div class="flex gap-6">
          <a href="#" class="text-gray-300 text-sm hover:text-primary transition-colors">Privacy</a>
          <a href="#" class="text-gray-300 text-sm hover:text-primary transition-colors">Terms</a>
          <a href="#" class="text-gray-300 text-sm hover:text-primary transition-colors">Cookies</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // Supabase configuration
    const SUPABASE_URL = 'https://ciwlmdnmnsymiwmschej.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNpd2xtZG5tbnN5bWl3bXNjaGVqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE2OTQzNjMsImV4cCI6MjA2NzI3MDM2M30.Ri_L-EBOOIvTY3WnMd91oegjauObj76pS4JmVIr4yjw';
    
    // DOM elements
    const loadingEl = document.getElementById('loading');
    const errorEl = document.getElementById('error');
    const errorMessageEl = document.getElementById('errorMessage');
    const notebookDetailEl = document.getElementById('notebookDetail');
    const relatedNotebooksEl = document.getElementById('relatedNotebooks');
    const submitBtns = [
      document.getElementById('submitBtn'), 
      document.getElementById('mobileSubmitBtn'),
      document.getElementById('footerSubmitBtn')
    ];
    const submitModal = document.getElementById('submitModal');
    const closeModalBtn = document.getElementById('closeModal');
    const cancelSubmitBtn = document.getElementById('cancelSubmit');
    const submitForm = document.getElementById('submitForm');
    const submitErrorEl = document.getElementById('submitError');
    const submitSuccessEl = document.getElementById('submitSuccess');
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    
    // Sample data as fallback
    const sampleNotebooks = [
      {
        id: '1',
        title: 'Climate Research Analysis with NotebookLM',
        description: 'Comprehensive analysis of 50+ climate research papers using NotebookLM to identify key trends and research gaps in climate science. This notebook demonstrates how NotebookLM can be used to process and synthesize large volumes of scientific literature, extracting key insights and identifying patterns that might be missed through manual review. The analysis focuses on climate change impacts, mitigation strategies, and adaptation approaches, providing a comprehensive overview of the current state of climate research. The notebook includes visualizations of research trends, citation networks, and thematic analysis to help researchers quickly understand the landscape of climate science literature.',
        category: 'Academic',
        tags: ['Climate Science', 'Research', 'Environmental', 'Literature Review', 'Data Visualization'],
        author: 'Dr. Sarah Chen',
        institution: 'Stanford University',
        notebook_url: 'https://notebooklm.google.com/notebook/example1',
        audio_overview_url: '/overview.mp3',
        featured: true,
        created_at: '2025-01-15T10:00:00Z',
        view_count: 1250,
        save_count: 89
      },
      {
        id: '2',
        title: 'AI Ethics Framework Development',
        description: 'Using NotebookLM to synthesize ethical guidelines from multiple AI research papers and policy documents.',
        category: 'Research',
        tags: ['AI Ethics', 'Policy', 'Framework'],
        author: 'Prof. Michael Rodriguez',
        institution: 'MIT',
        notebook_url: 'https://notebooklm.google.com/notebook/example2',
        featured: true,
        created_at: '2025-01-14T15:30:00Z',
        view_count: 892,
        save_count: 67
      },
      {
        id: '3',
        title: 'Startup Pitch Deck Analysis',
        description: 'Analyzing successful startup pitch decks to extract key patterns and success factors for entrepreneurs.',
        category: 'Business',
        tags: ['Entrepreneurship', 'Business Strategy', 'Startups'],
        author: 'Emma Thompson',
        institution: 'Y Combinator',
        notebook_url: 'https://notebooklm.google.com/notebook/example3',
        featured: false,
        created_at: '2025-01-13T09:15:00Z',
        view_count: 634,
        save_count: 45
      }
    ];
    
    // Get notebook ID from URL
    function getNotebookIdFromUrl() {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get('id');
    }
    
    // Fetch notebook details
    async function fetchNotebookDetails() {
      const notebookId = getNotebookIdFromUrl();
      
      if (!notebookId) {
        showError('No notebook ID provided');
        return;
      }
      
      showLoading();
      
      try {
        const response = await fetch(`${SUPABASE_URL}/rest/v1/notebooks?id=eq.${notebookId}&select=*`, {
          headers: {
            'apikey': SUPABASE_ANON_KEY,
            'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
          }
        });
        
        if (!response.ok) {
          throw new Error(`Failed to fetch notebook: ${response.status} ${response.statusText}`);
        }
        
        const notebooks = await response.json();
        
        if (notebooks && notebooks.length > 0) {
          displayNotebookDetails(notebooks[0]);
          fetchRelatedNotebooks(notebooks[0].category, notebooks[0].id);
        } else {
          // Try to find in sample data
          const sampleNotebook = sampleNotebooks.find(n => n.id === notebookId);
          
          if (sampleNotebook) {
            displayNotebookDetails(sampleNotebook);
            displayRelatedNotebooks(
              sampleNotebooks
                .filter(n => n.id !== notebookId)
                .slice(0, 3)
            );
          } else {
            throw new Error('Notebook not found');
          }
        }
      } catch (error) {
        console.error('Error fetching notebook details:', error);
        showError(error.message);
      }
    }
    
    // Fetch related notebooks
    async function fetchRelatedNotebooks(category, currentId) {
      try {
        const response = await fetch(`${SUPABASE_URL}/rest/v1/notebooks?category=eq.${category}&id=neq.${currentId}&select=*&limit=3`, {
          headers: {
            'apikey': SUPABASE_ANON_KEY,
            'Authorization': `Bearer ${SUPABASE_ANON_KEY}`
          }
        });
        
        if (!response.ok) {
          throw new Error(`Failed to fetch related notebooks: ${response.status} ${response.statusText}`);
        }
        
        const notebooks = await response.json();
        
        if (notebooks && notebooks.length > 0) {
          displayRelatedNotebooks(notebooks);
        } else {
          // Fallback to sample data
          displayRelatedNotebooks(
            sampleNotebooks
              .filter(n => n.category === category && n.id !== currentId)
              .slice(0, 3)
          );
        }
      } catch (error) {
        console.error('Error fetching related notebooks:', error);
        // Fallback to sample data
        displayRelatedNotebooks(
          sampleNotebooks
            .filter(n => n.category === category && n.id !== currentId)
            .slice(0, 3)
        );
      }
    }
    
    // Display notebook details
    function displayNotebookDetails(notebook) {
      // Update page title
      document.title = `${notebook.title} - notebooklm.directory`;
      
      // Update meta description
      const metaDescription = document.querySelector('meta[name="description"]');
      if (metaDescription) {
        metaDescription.content = notebook.description.substring(0, 160);
      }
      
      // Set detail content
      document.getElementById('detailTitle').textContent = notebook.title;
      document.getElementById('detailCategory').textContent = notebook.category;
      document.getElementById('detailDescription').textContent = notebook.description;
      document.getElementById('detailAuthor').textContent = notebook.author;
      document.getElementById('detailInstitution').textContent = notebook.institution || 'Independent';
      document.getElementById('detailViews').textContent = notebook.view_count || 0;
      document.getElementById('detailSaves').textContent = notebook.save_count || 0;
      document.getElementById('detailLink').href = notebook.notebook_url;
      
      // Format date
      const date = new Date(notebook.created_at);
      document.getElementById('detailDate').textContent = date.toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      });
      
      // Handle featured badge
      const featuredBadge = document.getElementById('detailFeatured');
      if (notebook.featured) {
        featuredBadge.classList.remove('hidden');
      } else {
        featuredBadge.classList.add('hidden');
      }
      
      // Set tags
      const tagsContainer = document.getElementById('detailTags');
      tagsContainer.innerHTML = '';
      
      if (notebook.tags && notebook.tags.length > 0) {
        notebook.tags.forEach(tag => {
          const tagEl = document.createElement('span');
          tagEl.className = 'tag';
          tagEl.textContent = tag;
          tagsContainer.appendChild(tagEl);
        });
      }
      
      // Show detail section
      hideLoading();
      notebookDetailEl.classList.remove('hidden');
      
      // Track view (in a real app, this would call the Supabase API)
      console.log(`Viewed notebook: ${notebook.id}`);
    }
    
    // Display related notebooks
    function displayRelatedNotebooks(notebooks) {
      relatedNotebooksEl.innerHTML = '';
      
      if (notebooks.length === 0) {
        relatedNotebooksEl.innerHTML = '<p class="text-gray-400 text-center py-4">No related notebooks found</p>';
        return;
      }
      
      notebooks.forEach(notebook => {
        const notebookEl = document.createElement('div');
        notebookEl.className = 'card p-4 flex flex-col h-full cursor-pointer';
        
        notebookEl.innerHTML = `
          <h3 class="text-lg font-bold text-white mb-2 line-clamp-2">${notebook.title}</h3>
          <p class="text-gray-300 text-sm mb-3 line-clamp-2">${notebook.description}</p>
          <div class="mt-auto pt-2 border-t border-white/10">
            <div class="text-white text-sm">${notebook.author}</div>
          </div>
        `;
        
        notebookEl.addEventListener('click', () => {
          window.location.href = `detail.html?id=${notebook.id}`;
        });
        
        relatedNotebooksEl.appendChild(notebookEl);
      });
    }
    
    // Show loading state
    function showLoading() {
      loadingEl.classList.remove('hidden');
      errorEl.classList.add('hidden');
      notebookDetailEl.classList.add('hidden');
    }
    
    // Hide loading state
    function hideLoading() {
      loadingEl.classList.add('hidden');
    }
    
    // Show error state
    function showError(message) {
      errorEl.classList.remove('hidden');
      loadingEl.classList.add('hidden');
      notebookDetailEl.classList.add('hidden');
      errorMessageEl.textContent = message || 'Failed to load notebook details.';
    }
    
    // Modal functions
    function openSubmitModal() {
      submitModal.classList.add('active');
      document.body.style.overflow = 'hidden';
      submitErrorEl.classList.add('hidden');
      submitSuccessEl.classList.add('hidden');
    }
    
    function closeSubmitModal() {
      submitModal.classList.remove('active');
      document.body.style.overflow = '';
      submitForm.reset();
    }
    
    // Toggle mobile menu
    function toggleMobileMenu() {
      mobileMenu.classList.toggle('hidden');
    }
    
    // Event listeners
    document.addEventListener('DOMContentLoaded', fetchNotebookDetails);
    
    submitBtns.forEach(btn => {
      if (btn) btn.addEventListener('click', openSubmitModal);
    });
    
    closeModalBtn.addEventListener('click', closeSubmitModal);
    cancelSubmitBtn.addEventListener('click', closeSubmitModal);
    
    mobileMenuBtn.addEventListener('click', toggleMobileMenu);
    
    submitForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      submitErrorEl.classList.add('hidden');
      submitSuccessEl.classList.add('hidden');
      
      const formData = new FormData(submitForm);
      const notebookData = {
        title: formData.get('title'),
        description: formData.get('description'),
        category: formData.get('category'),
        tags: formData.get('tags') ? formData.get('tags').split(',').map(tag => tag.trim()) : [],
        author: formData.get('author'),
        institution: formData.get('institution') || null,
        notebook_url: formData.get('notebook_url'),
        featured: false
      };
      
      try {
        const response = await fetch(`${SUPABASE_URL}/rest/v1/notebooks`, {
          method: 'POST',
          headers: {
            'apikey': SUPABASE_ANON_KEY,
            'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,
            'Content-Type': 'application/json',
            'Prefer': 'return=representation'
          },
          body: JSON.stringify(notebookData)
        });
        
        if (!response.ok) {
          throw new Error(`Failed to submit notebook: ${response.status} ${response.statusText}`);
        }
        
        // Show success message
        submitSuccessEl.classList.remove('hidden');
        
        // Reset form
        submitForm.reset();
        
        // Close modal after a delay
        setTimeout(() => {
          closeSubmitModal();
        }, 2000);
      } catch (error) {
        console.error('Error submitting notebook:', error);
        submitErrorEl.textContent = `Error: ${error.message}`;
        submitErrorEl.classList.remove('hidden');
      }
    });
  </script>
</body>
</html>